"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

require("source-map-support/register");

const Handlebars = require('handlebars');

const fs = require('fs-extra');

const _ = require('lodash');

const path = require('path');

const moment = require('moment');

const base64Img = require('base64-img');

const open = require('open');

const logger = require('@log4js-node/log4js-api');

const momentDurationFormatSetup = require("moment-duration-format");

momentDurationFormatSetup(moment);

class HtmlGenerator {
  static htmlOutput(reportOptions, callback = () => {}) {
    try {
      if (reportOptions.LOG) {
        reportOptions.LOG.debug("Html Generation started");
      }

      let templateFile = fs.readFileSync(reportOptions.templateFilename, 'utf8');
      Handlebars.registerHelper('imageAsBase64', function (screenshotFile, screenshotPath, hbopts) {
        // occurs when there is an error file
        if (!fs.existsSync(screenshotFile)) {
          if (screenshotPath) {
            screenshotFile = `${screenshotPath}/${screenshotFile}`;
          } else {
            screenshotFile = `${screenshotFile}`;
          }
        }

        const data = base64Img.base64Sync(path.resolve(`${screenshotFile}`));
        return `${data}`;
      });
      Handlebars.registerHelper('isValidReport', function (suites, hbopts) {
        if (suites && suites.length > 0) {
          return hbopts.fn(this);
        }

        return hbopts.inverse(this);
      });
      Handlebars.registerHelper('isValidSuite', function (suite, hbopts) {
        if (suite.title.length > 0 && suite.type === 'suite' && suite.tests.length > 0) {
          return hbopts.fn(this);
        }

        return hbopts.inverse(this);
      });
      Handlebars.registerHelper('testStateColour', function (state, hbopts) {
        if (state === 'passed') {
          return 'test-pass';
        } else if (state === 'failed') {
          return 'test-fail';
        } else if (state === 'pending') {
          return 'test-pending';
        } else if (state === 'skipped') {
          return 'test-skipped';
        }
      });
      Handlebars.registerHelper('testStateIcon', function (state, hbopts) {
        if (state === 'passed') {
          return '<span class="success">&#10004;</span>';
        } else if (state === 'failed') {
          return '<span class="error">&#10006;</span>';
        } else if (state === 'pending') {
          return '<span class="pending">&#10004;</span>';
        } else if (state === 'skipped') {
          return '<span class="skipped">&#10034;</span>';
        }
      });
      Handlebars.registerHelper('suiteStateColour', function (tests, hbopts) {
        let numTests = Object.keys(tests).length;

        let fail = _.values(tests).find(test => {
          return test.state === 'failed';
        });

        if (fail != null) {
          return 'suite-fail';
        }

        let passes = _.values(tests).filter(test => {
          return test.state === 'passed';
        });

        if (passes.length === numTests && numTests > 0) {
          return 'suite-pass';
        } //skipped is the lowest priority check


        let skipped = _.values(tests).find(test => {
          return test.state === 'skipped';
        });

        if (skipped != null) {
          return 'suite-pending';
        }

        return 'suite-unknown';
      });
      Handlebars.registerHelper('humanizeDuration', function (duration, hbopts) {
        return moment.duration(duration, "milliseconds").format('hh:mm:ss.SS', {
          trim: false
        });
      });
      Handlebars.registerHelper('ifSuiteHasTests', function (testsHash, hbopts) {
        if (Object.keys(testsHash).length > 0) {
          return hbopts.fn(this);
        }

        return hbopts.inverse(this);
      });
      Handlebars.registerHelper('ifEventIsError', function (event, hbopts) {
        if (event.type.includes('Error')) {
          return hbopts.fn(this);
        }

        return hbopts.inverse(this);
      });
      Handlebars.registerHelper('ifEventIsScreenshot', function (event, hbopts) {
        if (event.type === 'screenshot') {
          return hbopts.fn(this);
        }

        return hbopts.inverse(this);
      });
      Handlebars.registerHelper('ifEventIsLogMessage', function (event, hbopts) {
        if (event.type === 'log') {
          return hbopts.fn(this);
        }

        return hbopts.inverse(this);
      });
      Handlebars.registerHelper('logClass', function (text, hbopts) {
        if (text.includes('Test Iteration')) {
          return "test-iteration";
        } else {
          return "log-output";
        }
      });
      Object.keys(reportOptions.templateFuncs).forEach(key => {
        Handlebars.registerHelper(key, reportOptions.templateFuncs[key]);
      });

      if (fs.pathExistsSync(reportOptions.outputDir)) {
        let jsonFile = reportOptions.reportFile.replace('.html', '.json');
        fs.outputFileSync(jsonFile, JSON.stringify(reportOptions.data));
      }

      let template = Handlebars.compile(templateFile);
      let html = template(reportOptions.data);

      if (fs.pathExistsSync(reportOptions.outputDir)) {
        fs.outputFileSync(reportOptions.reportFile, html);

        try {
          if (reportOptions.showInBrowser) {
            let childProcess = open(reportOptions.reportFile);
            childProcess.then(() => {
              console.log('browser launched');
            }, error => {
              console.error('showInBrowser error spawning :' + reportOptions.reportFile + " " + error.toString());
            });
          }
        } catch (ex) {
          console.error('Error opening browser:' + ex);
        }
      }

      if (reportOptions.LOG) {
        reportOptions.LOG.debug("Html Generation completed");
      }

      callback(true);
    } catch (ex) {
      if (reportOptions.LOG) {
        reportOptions.LOG.error("Html Generation processing ended in error: " + ex);
      }

      callback(false);
    }
  }

}

var _default = HtmlGenerator;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9odG1sR2VuZXJhdG9yLmpzIl0sIm5hbWVzIjpbIkhhbmRsZWJhcnMiLCJyZXF1aXJlIiwiZnMiLCJfIiwicGF0aCIsIm1vbWVudCIsImJhc2U2NEltZyIsIm9wZW4iLCJsb2dnZXIiLCJtb21lbnREdXJhdGlvbkZvcm1hdFNldHVwIiwiSHRtbEdlbmVyYXRvciIsImh0bWxPdXRwdXQiLCJyZXBvcnRPcHRpb25zIiwiY2FsbGJhY2siLCJMT0ciLCJkZWJ1ZyIsInRlbXBsYXRlRmlsZSIsInJlYWRGaWxlU3luYyIsInRlbXBsYXRlRmlsZW5hbWUiLCJyZWdpc3RlckhlbHBlciIsInNjcmVlbnNob3RGaWxlIiwic2NyZWVuc2hvdFBhdGgiLCJoYm9wdHMiLCJleGlzdHNTeW5jIiwiZGF0YSIsImJhc2U2NFN5bmMiLCJyZXNvbHZlIiwic3VpdGVzIiwibGVuZ3RoIiwiZm4iLCJpbnZlcnNlIiwic3VpdGUiLCJ0aXRsZSIsInR5cGUiLCJ0ZXN0cyIsInN0YXRlIiwibnVtVGVzdHMiLCJPYmplY3QiLCJrZXlzIiwiZmFpbCIsInZhbHVlcyIsImZpbmQiLCJ0ZXN0IiwicGFzc2VzIiwiZmlsdGVyIiwic2tpcHBlZCIsImR1cmF0aW9uIiwiZm9ybWF0IiwidHJpbSIsInRlc3RzSGFzaCIsImV2ZW50IiwiaW5jbHVkZXMiLCJ0ZXh0IiwidGVtcGxhdGVGdW5jcyIsImZvckVhY2giLCJrZXkiLCJwYXRoRXhpc3RzU3luYyIsIm91dHB1dERpciIsImpzb25GaWxlIiwicmVwb3J0RmlsZSIsInJlcGxhY2UiLCJvdXRwdXRGaWxlU3luYyIsIkpTT04iLCJzdHJpbmdpZnkiLCJ0ZW1wbGF0ZSIsImNvbXBpbGUiLCJodG1sIiwic2hvd0luQnJvd3NlciIsImNoaWxkUHJvY2VzcyIsInRoZW4iLCJjb25zb2xlIiwibG9nIiwiZXJyb3IiLCJ0b1N0cmluZyIsImV4Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFDQSxNQUFNQSxVQUFVLEdBQUdDLE9BQU8sQ0FBQyxZ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Q0FBbUM1RCxhQUFhLENBQUMrQyxVQUFqRCxHQUE4RCxHQUE5RCxHQUFvRWEsS0FBSyxDQUFDQyxRQUFOLEVBQWxGO0FBQ0gsYUFOTDtBQU9IO0FBQ0osU0FaRCxDQVlFLE9BQU9DLEVBQVAsRUFBVztBQUNUSixVQUFBQSxPQUFPLENBQUNFLEtBQVIsQ0FBYywyQkFBMkJFLEVBQXpDO0FBQ0g7QUFDSjs7QUFDRCxVQUFJOUQsYUFBYSxDQUFDRSxHQUFsQixFQUF1QjtBQUNuQkYsUUFBQUEsYUFBYSxDQUFDRSxHQUFkLENBQWtCQyxLQUFsQixDQUF3QiwyQkFBeEI7QUFDSDs7QUFDREYsTUFBQUEsUUFBUSxDQUFDLElBQUQsQ0FBUjtBQUNILEtBaEtELENBZ0tFLE9BQU02RCxFQUFOLEVBQVU7QUFDUixVQUFJOUQsYUFBYSxDQUFDRSxHQUFsQixFQUF1QjtBQUNuQkYsUUFBQUEsYUFBYSxDQUFDRSxHQUFkLENBQWtCMEQsS0FBbEIsQ0FBd0IsZ0RBQWdERSxFQUF4RTtBQUNIOztBQUNEN0QsTUFBQUEsUUFBUSxDQUFDLEtBQUQsQ0FBUjtBQUNIO0FBQ0o7O0FBektnQjs7ZUE0S05ILGEiLCJzb3VyY2VzQ29udGVudCI6WyJcclxuY29uc3QgSGFuZGxlYmFycyA9IHJlcXVpcmUoJ2hhbmRsZWJhcnMnKTtcclxuY29uc3QgZnMgPSByZXF1aXJlKCdmcy1leHRyYScpO1xyXG5jb25zdCBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XHJcbmNvbnN0IHBhdGggPSByZXF1aXJlKCdwYXRoJyk7XHJcbmNvbnN0IG1vbWVudCA9IHJlcXVpcmUoJ21vbWVudCcpO1xyXG5jb25zdCBiYXNlNjRJbWcgPSByZXF1aXJlKCdiYXNlNjQtaW1nJyk7XHJcbmNvbnN0IG9wZW4gPSByZXF1aXJlKCdvcGVuJyk7XHJcbmNvbnN0IGxvZ2dlciA9IHJlcXVpcmUoJ0Bsb2c0anMtbm9kZS9sb2c0anMtYXBpJyk7XHJcblxyXG5jb25zdCBtb21lbnREdXJhdGlvbkZvcm1hdFNldHVwID0gcmVxdWlyZShcIm1vbWVudC1kdXJhdGlvbi1mb3JtYXRcIik7XHJcbm1vbWVudER1cmF0aW9uRm9ybWF0U2V0dXAobW9tZW50KTtcclxuXHJcbmNsYXNzIEh0bWxHZW5lcmF0b3IgIHtcclxuXHJcbiAgICBzdGF0aWMgaHRtbE91dHB1dChyZXBvcnRPcHRpb25zLCBjYWxsYmFjayA9ICgpID0+e30pIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAocmVwb3J0T3B0aW9ucy5MT0cpIHtcclxuICAgICAgICAgICAgICAgIHJlcG9ydE9wdGlvbnMuTE9HLmRlYnVnKFwiSHRtbCBHZW5lcmF0aW9uIHN0YXJ0ZWRcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbGV0IHRlbXBsYXRlRmlsZSA9IGZzLnJlYWRGaWxlU3luYyhyZXBvcnRPcHRpb25zLnRlbXBsYXRlRmlsZW5hbWUsICd1dGY4Jyk7XHJcblxyXG4gICAgICAgICAgICBIYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCdpbWFnZUFzQmFzZTY0JywgZnVuY3Rpb24gKHNjcmVlbnNob3RGaWxlLCBzY3JlZW5zaG90UGF0aCwgaGJvcHRzKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBvY2N1cnMgd2hlbiB0aGVyZSBpcyBhbiBlcnJvciBmaWxlXHJcbiAgICAgICAgICAgICAgICBpZiAoIWZzLmV4aXN0c1N5bmMoc2NyZWVuc2hvdEZpbGUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNjcmVlbnNob3RQYXRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjcmVlbnNob3RGaWxlID0gYCR7c2NyZWVuc2hvdFBhdGh9LyR7c2NyZWVuc2hvdEZpbGV9YFxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjcmVlbnNob3RGaWxlID0gYCR7c2NyZWVuc2hvdEZpbGV9YFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBiYXNlNjRJbWcuYmFzZTY0U3luYyhwYXRoLnJlc29sdmUoYCR7c2NyZWVuc2hvdEZpbGV9YCkpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGAke2RhdGF9YDtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIEhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ2lzVmFsaWRSZXBvcnQnLCBmdW5jdGlvbiAoc3VpdGVzLCBoYm9wdHMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChzdWl0ZXMgJiYgc3VpdGVzLmxlbmd0aCA+IDAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGhib3B0cy5mbih0aGlzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBoYm9wdHMuaW52ZXJzZSh0aGlzKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIEhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ2lzVmFsaWRTdWl0ZScsIGZ1bmN0aW9uIChzdWl0ZSwgaGJvcHRzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3VpdGUudGl0bGUubGVuZ3RoID4gMCAmJlxyXG4gICAgICAgICAgICAgICAgICAgIHN1aXRlLnR5cGUgPT09ICdzdWl0ZScgJiZcclxuICAgICAgICAgICAgICAgICAgICBzdWl0ZS50ZXN0cy5sZW5ndGggPiAwICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBoYm9wdHMuZm4odGhpcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaGJvcHRzLmludmVyc2UodGhpcyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcigndGVzdFN0YXRlQ29sb3VyJywgZnVuY3Rpb24gKHN0YXRlLCBoYm9wdHMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChzdGF0ZSA9PT0gJ3Bhc3NlZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ3Rlc3QtcGFzcyc7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHN0YXRlID09PSAnZmFpbGVkJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAndGVzdC1mYWlsJztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc3RhdGUgPT09ICdwZW5kaW5nJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAndGVzdC1wZW5kaW5nJztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc3RhdGUgPT09ICdza2lwcGVkJykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICd0ZXN0LXNraXBwZWQnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcigndGVzdFN0YXRlSWNvbicsIGZ1bmN0aW9uIChzdGF0ZSwgaGJvcHRzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3RhdGUgPT09ICdwYXNzZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICc8c3BhbiBjbGFzcz1cInN1Y2Nlc3NcIj4mIzEwMDA0Ozwvc3Bhbj4nIDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc3RhdGUgPT09ICdmYWlsZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICc8c3BhbiBjbGFzcz1cImVycm9yXCI+JiMxMDAwNjs8L3NwYW4+JyA7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHN0YXRlID09PSAncGVuZGluZycpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJzxzcGFuIGNsYXNzPVwicGVuZGluZ1wiPiYjMTAwMDQ7PC9zcGFuPicgO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzdGF0ZSA9PT0gJ3NraXBwZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICc8c3BhbiBjbGFzcz1cInNraXBwZWRcIj4mIzEwMDM0Ozwvc3Bhbj4nIDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBIYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCdzdWl0ZVN0YXRlQ29sb3VyJywgZnVuY3Rpb24gKHRlc3RzLCBoYm9wdHMpIHtcclxuICAgICAgICAgICAgICAgIGxldCBudW1UZXN0cyA9IE9iamVjdC5rZXlzKHRlc3RzKS5sZW5ndGg7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IGZhaWwgPSBfLnZhbHVlcyh0ZXN0cykuZmluZCgodGVzdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZXN0LnN0YXRlID09PSAnZmFpbGVkJztcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICBpZiAoZmFpbCAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdzdWl0ZS1mYWlsJztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgcGFzc2VzID0gXy52YWx1ZXModGVzdHMpLmZpbHRlcigodGVzdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZXN0LnN0YXRlID09PSAncGFzc2VkJztcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICBpZiAocGFzc2VzLmxlbmd0aCA9PT0gbnVtVGVzdHMgJiYgbnVtVGVzdHMgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdzdWl0ZS1wYXNzJztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvL3NraXBwZWQgaXMgdGhlIGxvd2VzdCBwcmlvcml0eSBjaGVja1xyXG4gICAgICAgICAgICAgICAgbGV0IHNraXBwZWQgPSBfLnZhbHVlcyh0ZXN0cykuZmluZCgodGVzdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZXN0LnN0YXRlID09PSAnc2tpcHBlZCc7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgaWYgKHNraXBwZWQgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnc3VpdGUtcGVuZGluZyc7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdzdWl0ZS11bmtub3duJ1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIEhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ2h1bWFuaXplRHVyYXRpb24nLCBmdW5jdGlvbiAoZHVyYXRpb24sIGhib3B0cykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1vbWVudC5kdXJhdGlvbihkdXJhdGlvbiwgXCJtaWxsaXNlY29uZHNcIikuZm9ybWF0KCdoaDptbTpzcy5TUycsIHt0cmltOiBmYWxzZX0pXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcignaWZTdWl0ZUhhc1Rlc3RzJywgZnVuY3Rpb24gKHRlc3RzSGFzaCwgaGJvcHRzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmtleXModGVzdHNIYXNoKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGhib3B0cy5mbih0aGlzKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGhib3B0cy5pbnZlcnNlKHRoaXMpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgICAgICBIYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCdpZkV2ZW50SXNFcnJvcicsIGZ1bmN0aW9uIChldmVudCwgaGJvcHRzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQudHlwZS5pbmNsdWRlcygnRXJyb3InKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBoYm9wdHMuZm4odGhpcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaGJvcHRzLmludmVyc2UodGhpcyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcignaWZFdmVudElzU2NyZWVuc2hvdCcsIGZ1bmN0aW9uIChldmVudCwgaGJvcHRzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ3NjcmVlbnNob3QnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGhib3B0cy5mbih0aGlzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBoYm9wdHMuaW52ZXJzZSh0aGlzKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBIYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCdpZkV2ZW50SXNMb2dNZXNzYWdlJywgZnVuY3Rpb24gKGV2ZW50LCBoYm9wdHMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChldmVudC50eXBlID09PSAnbG9nJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBoYm9wdHMuZm4odGhpcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaGJvcHRzLmludmVyc2UodGhpcyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcignbG9nQ2xhc3MnLCBmdW5jdGlvbiAodGV4dCAsIGhib3B0cykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRleHQuaW5jbHVkZXMoJ1Rlc3QgSXRlcmF0aW9uJykpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJ0ZXN0LWl0ZXJhdGlvblwiO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJsb2ctb3V0cHV0XCI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgT2JqZWN0LmtleXMocmVwb3J0T3B0aW9ucy50ZW1wbGF0ZUZ1bmNzKS5mb3JFYWNoKChrZXkpPT57XHJcbiAgICAgICAgICAgICAgICBIYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKGtleSwgcmVwb3J0T3B0aW9ucy50ZW1wbGF0ZUZ1bmNzW2tleV0pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGlmIChmcy5wYXRoRXhpc3RzU3luYyhyZXBvcnRPcHRpb25zLm91dHB1dERpcikpIHtcclxuICAgICAgICAgICAgICAgbGV0IGpzb25GaWxlID0gcmVwb3J0T3B0aW9ucy5yZXBvcnRGaWxlLnJlcGxhY2UoJy5odG1sJyAsICcuanNvbicpIDtcclxuICAgICAgICAgICAgICAgICAgICBmcy5vdXRwdXRGaWxlU3luYyhqc29uRmlsZSwgSlNPTi5zdHJpbmdpZnkocmVwb3J0T3B0aW9ucy5kYXRhKSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxldCB0ZW1wbGF0ZSA9IEhhbmRsZWJhcnMuY29tcGlsZSh0ZW1wbGF0ZUZpbGUpO1xyXG4gICAgICAgICAgICBsZXQgaHRtbCA9IHRlbXBsYXRlKHJlcG9ydE9wdGlvbnMuZGF0YSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoZnMucGF0aEV4aXN0c1N5bmMocmVwb3J0T3B0aW9ucy5vdXRwdXREaXIpKSB7XHJcbiAgICAgICAgICAgICAgICBmcy5vdXRwdXRGaWxlU3luYyhyZXBvcnRPcHRpb25zLnJlcG9ydEZpbGUsIGh0bWwpO1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVwb3J0T3B0aW9ucy5zaG93SW5Ccm93c2VyKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgY2hpbGRQcm9jZXNzID0gb3BlbihyZXBvcnRPcHRpb25zLnJlcG9ydEZpbGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGlsZFByb2Nlc3MudGhlbihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnYnJvd3NlciBsYXVuY2hlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ3Nob3dJbkJyb3dzZXIgZXJyb3Igc3Bhd25pbmcgOicgKyByZXBvcnRPcHRpb25zLnJlcG9ydEZpbGUgKyBcIiBcIiArIGVycm9yLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChleCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIG9wZW5pbmcgYnJvd3NlcjonICsgZXgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChyZXBvcnRPcHRpb25zLkxPRykge1xyXG4gICAgICAgICAgICAgICAgcmVwb3J0T3B0aW9ucy5MT0cuZGVidWcoXCJIdG1sIEdlbmVyYXRpb24gY29tcGxldGVkXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhbGxiYWNrKHRydWUpO1xyXG4gICAgICAgIH0gY2F0Y2goZXgpIHtcclxuICAgICAgICAgICAgaWYgKHJlcG9ydE9wdGlvbnMuTE9HKSB7XHJcbiAgICAgICAgICAgICAgICByZXBvcnRPcHRpb25zLkxPRy5lcnJvcihcIkh0bWwgR2VuZXJhdGlvbiBwcm9jZXNzaW5nIGVuZGVkIGluIGVycm9yOiBcIiArIGV4KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYWxsYmFjayhmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBIdG1sR2VuZXJhdG9yO1xyXG4iXX0=